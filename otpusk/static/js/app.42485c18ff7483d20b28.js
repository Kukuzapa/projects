webpackJsonp([1],{"1/oy":function(t,e){},"6YpW":function(t,e){},"9M+g":function(t,e){},GfHa:function(t,e){},Gs8j:function(t,e){},Id91:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),o=s("NYxO"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},i,!1,function(t){s("6YpW")},null,null).exports,r=s("/ocq"),c={name:"HelloWorld",methods:{vacation_decision:function(t,e,s){var a=this,o="/vm/admin/vacation/"+s+"?userid="+this.$route.params.userid,i={vacid:t,name:e};this.comment.length>0&&(i.comment=this.comment),this.axios.post(o,i,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){a.action=t.data.action})},get_status:function(t){var e="Решение не принято";return-2==t&&(e="Заявка отозвана пользователем"),-1==t&&(e="Заявка отклонена"),1==t&&(e="Заявка одобрена"),e}},created:function(){var t=this;this.$route.query.access_token?this.user_token=this.$route.query.access_token:window.location.href="https://id.gtn.ee/oauth/authorize?response_type="+this.response_type+"&client_id="+this.client_id+"&state=kukuzapa+forever&redirect_uri="+this.redirect_uri,this.axios.get("/vm/admin/link",{params:{userid:this.$route.params.userid,vacid:this.$route.params.vacid},headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.vacation=e.data.sel,t.comments=e.data.com,t.logs=e.data.log,t.cross=e.data.cross}).catch(function(e){t.$router.push("/")})},data:function(){return{response_type:"token",client_id:"550a99bc-ba73-11e8-ba29-977a227fe9e2",state:"kukuzapa forever",redirect_uri:window.location.href,vacation:{},comments:{},logs:{},cross:{},comment:"",action:null,user_token:""}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row text-center"},[s("div",{staticClass:"col-12"},[s("h5",[t._v("Детали заявки")]),t._v(" "),s("table",{staticClass:"table table-bordered"},[t._m(0),t._v(" "),s("tbody",[s("tr",[s("td",[t._v(t._s(t.vacation.name))]),t._v(" "),s("td",[t._v(t._s(t.vacation.begin))]),t._v(" "),s("td",[t._v(t._s(t.vacation.end))]),t._v(" "),s("td",[t._v(t._s(t.vacation.days))]),t._v(" "),s("td",[t._v(t._s(t.vacation.type))]),t._v(" "),s("td",[t._v(t._s(t.get_status(t.vacation.status)))])])])])]),t._v(" "),-2==t.vacation.status?s("div",{staticClass:"col-12"},[s("p",[t._v("Пользователь сам отозвал свою заявку.")])]):t._e(),t._v(" "),-2!=t.vacation.status?s("div",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Решайте и комментируйте")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"2"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]):t._e(),t._v(" "),-2!=t.vacation.status?s("div",{staticClass:"col-6 mb-3"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){t.vacation_decision(t.$route.params.vacid,t.vacation.name,"accept")}}},[t._v("Подвердить")])]):t._e(),t._v(" "),-2!=t.vacation.status?s("div",{staticClass:"col-6 mb-3"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){t.vacation_decision(t.$route.params.vacid,t.vacation.name,"reject")}}},[t._v("Отказать")])]):t._e(),t._v(" "),s("div",{staticClass:"col-12"},[t.action?s("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v("\n\t\t\t\t"+t._s(t.action)+"\n\t\t\t")]):t._e()]),t._v(" "),s("div",{staticClass:"col-12"},[s("h5",[t._v("Пересечения с обладателями схожих компетенций")]),t._v(" "),s("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),s("tbody",t._l(t.cross,function(e){return s("tr",[s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.begin))]),t._v(" "),s("td",[t._v(t._s(e.end))]),t._v(" "),s("td",[t._v(t._s(e.days))]),t._v(" "),s("td",[t._v(t._s(e.competense))]),t._v(" "),s("td",[t._v(t._s(t.get_status(e.status)))])])}))])]),t._v(" "),s("div",{staticClass:"col-12"},[s("h5",[t._v("Журнал операций с заявкой")]),t._v(" "),s("table",{staticClass:"table table-bordered"},[t._m(2),t._v(" "),s("tbody",t._l(t.logs,function(e){return s("tr",[s("td",[t._v(t._s(e.date_time))]),t._v(" "),s("td",[t._v(t._s(e.action))]),t._v(" "),s("td",[t._v(t._s(e.comment))])])}))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Дней")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Тип отпуска")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Статус")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Дней")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Компетенция")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Статус")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[this._v("Дата")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Действие")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Комментарий")])])])}]},_=s("VU/8")(c,l,!1,null,null,null).exports,d={name:"login",data:function(){return{response_type:"token",client_id:"550a99bc-ba73-11e8-ba29-977a227fe9e2",state:"kukuzapa forever",redirect_uri:window.location.href}},created:function(){var t=this;this.$route.query.access_token&&this.axios.get("https://id.gtn.ee/rc/api/v1.0/userinfo",{headers:{Authorization:"Bearer "+this.$route.query.access_token}}).then(function(e){console.log(e),t.$store.commit("login",{token:t.$route.query.access_token,name:e.data.name,email:e.data.email,userid:e.data.sub}),t.$router.push("/vacation")})},methods:{login:function(){window.location.href="https://id.gtn.ee/oauth/authorize?response_type="+this.response_type+"&client_id="+this.client_id+"&state=kukuzapa+forever&redirect_uri="+this.redirect_uri}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("button",{staticClass:"btn btn-primary btn-block col-12",attrs:{type:"button"},on:{click:this.login}},[this._v('Вход в сервис "Менеджер отпусков"')])])])},staticRenderFns:[]},m=s("VU/8")(d,v,!1,null,null,null).exports,u={name:"vacation",data:function(){return{user_admin:!1,user_id:null,user_name:null,user_email:null,user_token:this.$store.state.current.token,vacations:{},active_block:{user:!0,admin:!1}}},created:function(){this.get_user()},watch:{user_id:function(){var t=this,e=new Date;this.axios.get("/vm/user/vacations",{params:{userid:this.user_id,clid:this.user_id,period:e.getFullYear()},headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.vacations=e.data})}},methods:{logout:function(){this.axios.get("/vm/user/login",{params:{userid:this.user_id},headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){}),this.$router.push("/")},show_block:function(t){if(this.$route.path.split("/")[2]!=t)for(var e in this.$router.push("/vacation/"+t),this.active_block)this.active_block[e]=e==t},get_user:function(){var t=this;this.axios.get("/vm/user/get",{params:{name:this.$store.state.current.name,email:this.$store.state.current.email,userid:this.$store.state.current.userid},headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.user_name=e.data.name,t.user_email=e.data.email,t.user_id=e.data.id,t.show_block("user"),e.data.isadmin&&(t.user_admin=!0)})}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 text-center font-weight-bold"},[t._v("\n                Vacation Manager\n            ")]),t._v(" "),s("div",{staticClass:"col-4 col-md-4"},[t._v("\n\t\t\t\t"+t._s(t.user_name)+", "+t._s(t.user_email)+"\n\t\t\t")]),t._v(" "),s("div",{staticClass:"col-4 col-md-4"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:t.logout}},[t._v("Выход")])]),t._v(" "),s("div",{staticClass:"col-12"},t._l(t.vacations,function(e,a){return s("span",[s("strong",[t._v(t._s(a))]),t._v(": "+t._s(e)+".\n                ")])})),t._v(" "),s("div",{staticClass:"col-6 mb-2 mt-2 order-5"},[t.user_admin?s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.user},attrs:{type:"button"},on:{click:function(e){t.show_block("user")}}},[t._v("User")]):t._e()]),t._v(" "),s("div",{staticClass:"col-6 mb-2 mt-2 order-6"},[t.user_admin?s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.admin},attrs:{type:"button"},on:{click:function(e){t.show_block("admin")}}},[t._v("Admin")]):t._e()])]),t._v(" "),t.user_admin?s("hr",{attrs:{noshade:""}}):t._e(),t._v(" "),s("router-view",{attrs:{user_id:t.user_id,user_token:t.user_token}})],1)},staticRenderFns:[]},p=s("VU/8")(u,h,!1,null,null,null).exports,f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 mb-2 mt-2 d-none d-md-block"},[s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.new},attrs:{type:"button"},on:{click:function(e){t.show_block("new")}}},[t._v("Новая заявка")])]),t._v(" "),s("div",{staticClass:"col-4 mb-2 mt-2 d-none d-md-block"},[s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.list},attrs:{type:"button"},on:{click:function(e){t.show_block("list")}}},[t._v("Список заявок")])]),t._v(" "),s("div",{staticClass:"col-4 mb-2 mt-2 d-none d-md-block"},[s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.history},attrs:{type:"button"},on:{click:function(e){t.show_block("history")}}},[t._v("История заявок")])]),t._v(" "),s("div",{staticClass:"col-12"},[s("b-dropdown",{staticClass:"mt-2 mb-2 w-100 d-block d-md-none",attrs:{id:"ddown-buttons",text:"Меню","toggle-class":"w-100","menu-class":"w-100"}},[s("b-dropdown-item-button",{on:{click:function(e){t.show_block("new")}}},[t._v("Новая заявка")]),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){t.show_block("list")}}},[t._v("Список заявок")]),t._v(" "),s("b-dropdown-item-button",{on:{click:function(e){t.show_block("history")}}},[t._v("История заявок")])],1)],1),t._v(" "),s("router-view",{attrs:{user_id:t.user_id,user_token:t.user_token}})],1)},staticRenderFns:[]},b=s("VU/8")({name:"v_user",props:["user_id","user_token"],data:function(){return{active_block:{new:!0,list:!1,history:!1}}},methods:{show_block:function(t){for(var e in this.$router.push("/vacation/user/"+t),this.active_block)this.active_block[e]=e==t}},mounted:function(){this.show_block("new")}},f,!1,null,null,null).exports,g={name:"v_user_new",props:["user_id","user_token"],data:function(){return{b_date_2:"",e_date_2:"",res:{},comment:"",vac_type:"org"}},watch:{b_date:function(){this.e_options.minDate=this.b_date}},methods:{get_period:function(t,e){var s="";return t&&(s=s+t+", "+this.get_day_of_week(t)),e&&(s=s+" - "+e+", "+this.get_day_of_week(e)),s},get_day_of_week:function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2]).toLocaleString("ru",{weekday:"short"})},vacation_check:function(){var t=this;if(0!=this.b_date_2.length&&0!=this.e_date_2.length){var e={userid:this.user_id,begin_date:this.b_date_2,end_date:this.e_date_2},s="/vm/user/vacation/check?userid="+this.user_id;this.axios.post(s,e,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.res=e.data})}else this.res={err:"Не указана дата начала/окончания отпуска"}},vacation_send:function(){var t=this;if(0!=this.b_date_2.length&&0!=this.e_date_2.length){var e={begin_date:this.b_date_2,end_date:this.e_date_2,type:this.vac_type};this.comment.length>0&&(e.comment=this.comment);var s="/vm/user/vacation/send?userid="+this.user_id;this.axios.post(s,e,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.res=e.data})}else this.res={err:"Не указана дата начала/окончания отпуска"}}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"col-12"},[s("p",[t._v("Создание заявки. При наведении курсора на кнопку будет показана подсказка")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"datepicker-trigger"}},[t._v("Выбор даты начала и окончания отпуска")]),t._v(" "),s("div",{staticClass:"datepicker-trigger"},[s("input",{staticClass:"form-control col-12",attrs:{type:"text",id:"datepicker-trigger",placeholder:"Выберите даты"},domProps:{value:t.get_period(t.b_date_2,t.e_date_2)}}),t._v(" "),s("AirbnbStyleDatepicker",{attrs:{"trigger-element-id":"datepicker-trigger",mode:"range","fullscreen-mobile":!0,dateOne:t.b_date_2,dateTwo:t.e_date_2},on:{"date-one-selected":function(e){t.b_date_2=e},"date-two-selected":function(e){t.e_date_2=e},apply:t.vacation_check}})],1)]),t._v(" "),s("div",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Оставьте комментарий, если необходимо")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-check col-12 col-sm-6 mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.vac_type,expression:"vac_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"exampleRadios",id:"exampleRadios1",value:"org",checked:""},domProps:{checked:t._q(t.vac_type,"org")},on:{change:function(e){t.vac_type="org"}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"exampleRadios1"}},[t._v("\n                За счет организации\n            ")])]),t._v(" "),s("div",{staticClass:"form-check col-12 col-sm-6 mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.vac_type,expression:"vac_type"}],staticClass:"form-check-input",attrs:{type:"radio",name:"exampleRadios",id:"exampleRadios2",value:"cli"},domProps:{checked:t._q(t.vac_type,"cli")},on:{change:function(e){t.vac_type="cli"}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"exampleRadios2"}},[t._v("\n                За свой счет\n            ")])]),t._v(" "),t.res.alert?s("div",{staticClass:"form-group col-12 d-none d-md-block"},[s("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[s("table",{staticClass:"table table-bordered"},[t._m(0),t._v(" "),s("tbody",t._l(t.res.alert,function(e,a){return s("tr",[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.begin)+", "+t._s(t.get_day_of_week(e.begin)))]),t._v(" "),s("td",[t._v(t._s(e.end)+", "+t._s(t.get_day_of_week(e.end)))]),t._v(" "),s("td",[t._v(t._s(e.competense))]),t._v(" "),s("td",[t._v(t._s(e.status?1==e.status?"Одобрена":"Отказ":"В процессе"))])])}))])])]):t._e(),t._v(" "),s("div",{staticClass:"col-12 d-block d-md-none"},t._l(t.res.alert,function(e,a){return s("p",{staticClass:"alert alert-warning"},[s("strong",[t._v("Номер")]),t._v(" "+t._s(e.id)+", "),s("strong",[t._v("Автор")]),t._v(" "+t._s(e.name)+", "),s("strong",[t._v("Начало")]),t._v(" "+t._s(e.name)+",\n                "),s("strong",[t._v("Конец")]),t._v(" "+t._s(e.name)+", "),s("strong",[t._v("Компетенции")]),t._v(" "+t._s(e.name)+", "),s("strong",[t._v("Статус")]),t._v(" "+t._s(e.name)+"\n            ")])})),t._v(" "),t.res.succecc?s("div",{staticClass:"form-group col-12"},[s("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v("\n                "+t._s(t.res.succecc)+"\n            ")])]):t._e(),t._v(" "),t.res.err?s("div",{staticClass:"form-group col-12"},[s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n                "+t._s(t.res.err)+"\n            ")])]):t._e(),t._v(" "),s("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"col-12 mb-3",attrs:{title:"Отправка заявки на рассмотрение администратору"}},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:t.vacation_send}},[t._v("Отправить заявку")])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Компетенции")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Статус")])])])}]},w=s("VU/8")(g,k,!1,null,null,null).exports,y={name:"v_user_list",props:["user_id","user_token"],data:function(){return{res:{},test:null,comment:"",res_comments:{}}},mounted:function(){this.get_list()},methods:{vacation_comment:function(t){var e=this;if(this.comment.length>0){var s={vacid:t,comment:this.comment},a="/vm/user/comment?userid="+this.user_id;this.axios.post(a,s,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){e.get_list()})}this.hide_comment_modal()},show_comment_modal:function(t,e){var s=this;this.axios.get("/vm/user/comment",{params:{userid:this.user_id,vacid:t},headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){s.res_comments=e.data,s.test=t,s.comment="",s.$refs.comment_modal.show()})},show_cancel_modal:function(t){this.test=t,this.comment="",this.$refs.cancel_modal.show()},hide_cancel_modal:function(){this.$refs.cancel_modal.hide()},hide_comment_modal:function(){this.$refs.comment_modal.hide()},vacation_cancel:function(t){var e=this,s={vacid:t};this.comment.length>0&&(s.comment=this.comment);var a="/vm/user/vacation/cancel?userid="+this.user_id;this.axios.post(a,s,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){e.get_list()}),this.hide_cancel_modal()},get_list:function(){var t=this;this.axios.get("/vm/user/list",{params:{userid:this.user_id},headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){e.data.err&&t.$router.push("/"),t.res=e.data})},get_day_of_week:function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2]).toLocaleString("ru",{weekday:"short"})}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("p",[t._v("Список заявок срок которых еще не наступил либо начался сегодня. Заявку можно отменить. При наведении курсора на название\n        колонки будет показана подсказка")]),t._v(" "),s("b-modal",{ref:"cancel_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[s("form",{staticClass:"row"},[s("div",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Отзыв заявки "+t._s(t.test)+", введите ваш комментарий")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-12"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){t.vacation_cancel(t.test)}}},[t._v("Отзыв заявки")])])])]),t._v(" "),s("b-modal",{ref:"comment_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[t.res_comments.succecc?s("p",[t._v(t._s(t.res_comments.succecc))]):s("ul",{staticClass:"text-left"},t._l(t.res_comments,function(e){return s("li",[s("strong",[t._v(t._s(e.name))]),t._v(": "+t._s(e.comment)+"\n            ")])})),t._v(" "),s("form",{staticClass:"row"},[s("div",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Заявка "+t._s(t.test)+", введите ваш комментарий")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-12"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){t.vacation_comment(t.test)}}},[t._v("Оставить комментарий")])])])]),t._v(" "),s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"d-none d-md-block",attrs:{title:"Номер заявки в БД",scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Дата начала отпуска",scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"d-none d-md-block",attrs:{title:"Дата окончания отпуска",scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Кол-во дней отпуска. Включает дату начала и окончания",scope:"col"}},[t._v("Дней")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Статус заявки. В процессе - администратор не принял определенного решения. Одобрена - Администратор\n                    одобрил заявку. Отказ - заявка не одобрена Администратором. Отозвано пользователем - пациент передумал",scope:"col"}},[t._v("Статус")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"d-none d-md-block",attrs:{title:"Список комментариев к заявке. Можно добавить свой комментарий. Беленькая иконка означает отсутсвие комментариев",scope:"col"}},[t._v("Комментарии")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Отзыв заявки. Заявки примет статус 'Отозвано пользователем'",scope:"col"}},[t._v("Удалить")])])]),t._v(" "),s("tbody",t._l(t.res,function(e){return s("tr",[s("td",{staticClass:"d-none d-md-block"},[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.begin)+", "+t._s(t.get_day_of_week(e.begin)))]),t._v(" "),s("td",{staticClass:"d-none d-md-block"},[t._v(t._s(e.end)+", "+t._s(t.get_day_of_week(e.end)))]),t._v(" "),s("td",[t._v(t._s(e.counts))]),t._v(" "),s("td",[t._v(t._s(e.status?1==e.status?"Одобрена":-1==e.status?"Отказ":"Отозвано пользователем":"В процессе"))]),t._v(" "),s("td",{staticClass:"d-none d-md-block"},[e.comments>0?s("i",{staticClass:"fas fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}}):s("i",{staticClass:"far fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}})]),t._v(" "),s("td",[s("i",{staticClass:"fas fa-trash-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_cancel_modal(e.id)}}})])])}))])],1)},staticRenderFns:[]},x=s("VU/8")(y,C,!1,null,null,null).exports,$={name:"v_user_history",props:["user_id","user_token"],data:function(){return{res:{},res_comments:{},test:null}},mounted:function(){this.get_history()},methods:{show_comment_modal:function(t){var e=this;this.axios.get("/vm/user/comment",{params:{userid:this.user_id,vacid:t},headers:{Authorization:"Bearer "+this.user_token}}).then(function(s){e.res_comments=s.data,e.test=t,e.$refs.comment_modal.show()})},get_history:function(){var t=this;this.axios.get("/vm/user/history",{params:{userid:this.user_id},headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.res=e.data})},get_day_of_week:function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2]).toLocaleString("ru",{weekday:"short"})}}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("p",[t._v("Список заявок дата начала которых меньше сегодняшнего дня либо заявок отозванных пользователем. Помните, что Администратор может внезапно отменить любую из них. Будьте\n        бдительны. При наведении курсора на название колонки будет показана подсказка")]),t._v(" "),s("b-modal",{ref:"comment_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[t.res_comments.succecc?s("p",[t._v(t._s(t.res_comments.succecc))]):s("ul",{staticClass:"text-left"},t._l(t.res_comments,function(e){return s("li",[s("strong",[t._v(t._s(e.name))]),t._v(": "+t._s(e.comment)+"\n            ")])}))]),t._v(" "),s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"d-none d-md-block",attrs:{title:"Номер заявки в БД",scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Дата начала отпуска",scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"d-none d-md-block",attrs:{title:"Дата окончания отпуска",scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Кол-во дней отпуска. Включает дату начала и окончания",scope:"col"}},[t._v("Дней")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Статус заявки. В процессе - администратор не принял определенного решения. Одобрена - Администратор\n                    одобрил заявку. Отказ - заявка не одобрена Администратором. Отозвано пользователем - пациент передумал",scope:"col"}},[t._v("Статус")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Список комментариев к заявке. Можно добавить свой комментарий. Беленькая иконка означает отсутсвие комментариев",scope:"col"}},[t._v("Комментарии")])])]),t._v(" "),s("tbody",t._l(t.res,function(e){return s("tr",[s("td",{staticClass:"d-none d-md-block"},[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.begin)+", "+t._s(t.get_day_of_week(e.begin)))]),t._v(" "),s("td",{staticClass:"d-none d-md-block"},[t._v(t._s(e.end)+", "+t._s(t.get_day_of_week(e.end)))]),t._v(" "),s("td",[t._v(t._s(e.counts))]),t._v(" "),s("td",[t._v(t._s(e.status?1==e.status?"Одобрена":-1==e.status?"Отказ":"Отозвано пользователем":"В процессе"))]),t._v(" "),s("td",[e.comments>0?s("i",{staticClass:"fas fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}}):s("i",{staticClass:"far fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}})])])}))])],1)},staticRenderFns:[]},z=s("VU/8")($,N,!1,null,null,null).exports,S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 mb-2"},[s("vue-bootstrap-typeahead",{attrs:{data:t.clients,size:"sm",serializer:function(t){return t.name},placeholder:"Введите имя пользователя в качестве фильтра"},on:{hit:function(e){t.select=e}},model:{value:t.clname,callback:function(e){t.clname=e},expression:"clname"}})],1),t._v(" "),s("div",{staticClass:"col-12 mb-2 mt-2"},[s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.new},attrs:{type:"button"},on:{click:function(e){t.show_block("new")}}},[t._v("Новые заявки, необработанные")])]),t._v(" "),s("div",{staticClass:"col-3 mb-2 mt-2"},[s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.list},attrs:{type:"button"},on:{click:function(e){t.show_block("list")}}},[t._v("Список актуальных заявок")])]),t._v(" "),s("div",{staticClass:"col-3 mb-2 mt-2"},[s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.history},attrs:{type:"button"},on:{click:function(e){t.show_block("history")}}},[t._v("История заявок")])]),t._v(" "),s("div",{staticClass:"col-3 mb-2 mt-2"},[s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.users},attrs:{type:"button"},on:{click:function(e){t.show_block("users")}}},[t._v("Компетенции и пользователи")])]),t._v(" "),s("div",{staticClass:"col-3 mb-2 mt-2"},[s("button",{staticClass:"btn btn-primary btn-block",class:{"btn-success":t.active_block.log},attrs:{type:"button"},on:{click:function(e){t.show_block("log")}}},[t._v("Журнал операций")])]),t._v(" "),s("router-view",{attrs:{user_id:t.user_id,clname:t.clname,user_token:t.user_token}})],1)},staticRenderFns:[]},A=s("VU/8")({name:"v_admin",props:["user_id","user_token"],data:function(){return{active_block:{new:!0,list:!1,history:!1,users:!1,log:!1},clname:"",clients:[]}},watch:{clname:function(){var t=this;this.axios.get("/vm/admin/find",{params:{userid:this.user_id,clname:this.clname},headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){e.data.length?t.clients=e.data:t.clients=[]})}},methods:{show_block:function(t){for(var e in this.$router.push("/vacation/admin/"+t),this.active_block)this.active_block[e]=e==t}},mounted:function(){this.show_block("new")}},S,!1,null,null,null).exports,B={name:"v_admin_new",props:["user_id","clname","user_token"],data:function(){return{res:{},res_comments:{},res_cross:{},vacid:null,name:null,comment:"",vacations:{},limit:8,current_page:1,count:null}},mounted:function(){this.get_new("count"),this.get_new()},watch:{clname:function(){this.get_new("count"),this.get_new()},current_page:function(){this.get_new()}},methods:{show_cross_modal:function(t,e){var s=this;this.axios.get("/vm/admin/cross",{params:{userid:this.user_id,vacid:t,clid:e},headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){s.res_cross=t.data,s.$refs.cross_modal.show()})},vacation_reject:function(){var t=this,e={vacid:this.vacid,name:this.name};this.comment.length>0&&(e.comment=this.comment);var s="/vm/admin/vacation/reject?userid="+this.user_id;this.axios.post(s,e,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.get_new()}),this.$refs.decision_modal.hide()},show_decision_modal:function(t,e,s){var a=this,o=new Date;this.axios.get("/vm/admin/vacations",{params:{userid:this.user_id,clid:s,period:o.getFullYear()},headers:{Authorization:"Bearer "+this.user_token}}).then(function(s){a.vacations=s.data,a.vacid=t,a.name=e,a.comment="",a.$refs.decision_modal.show()})},vacation_accept:function(){var t=this,e={vacid:this.vacid,name:this.name};this.comment.length>0&&(e.comment=this.comment);var s="/vm/admin/vacation/accept?userid="+this.user_id;this.axios.post(s,e,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.get_new()}),this.$refs.decision_modal.hide()},show_comment_modal:function(t){var e=this;this.axios.get("/vm/admin/comment",{params:{userid:this.user_id,vacid:t,token:this.user_token},headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){e.res_comments=t.data,e.$refs.comment_modal.show()})},get_new:function(t){var e=this,s={params:{userid:this.user_id,page:this.current_page,limit:this.limit},headers:{Authorization:"Bearer "+this.user_token}};this.clname.length>0&&(s.params.clname=this.clname),t&&(s.params.count="count"),this.axios.get("/vm/admin/new",s).then(function(s){t?e.count=+s.data.count:e.res=s.data})},get_day_of_week:function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2]).toLocaleString("ru",{weekday:"short"})}}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("p",[t._v("Список заявок решение по которым еще не принято. При наведении курсора на название колонки будет показана подсказка")]),t._v(" "),s("b-modal",{ref:"comment_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[t.res_comments.succecc?s("p",[t._v(t._s(t.res_comments.succecc))]):s("ul",{staticClass:"text-left"},t._l(t.res_comments,function(e){return s("li",[s("strong",[t._v(t._s(e.name))]),t._v(": "+t._s(e.comment)+"\n            ")])}))]),t._v(" "),s("b-modal",{ref:"cross_modal",attrs:{"no-fade":"","hide-footer":"","hide-header":"",size:"lg"}},[s("table",{staticClass:"table table-bordered"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Компетенции")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Статус")])])]),t._v(" "),s("tbody",t._l(t.res_cross,function(e){return s("tr",[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.begin)+", "+t._s(t.get_day_of_week(e.begin)))]),t._v(" "),s("td",[t._v(t._s(e.end)+", "+t._s(t.get_day_of_week(e.end)))]),t._v(" "),s("td",[t._v(t._s(e.competense))]),t._v(" "),s("td",[t._v(t._s(e.status?1==e.status?"Одобрена":-2==e.status?"Отозвана":"Отказ":"В процессе"))])])}))])]),t._v(" "),s("b-modal",{ref:"decision_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[s("h4",[t._v("Заявка № "+t._s(t.vacid)+" пользователя "+t._s(t.name))]),t._v(" "),s("p",[t._v("Кол-во одобренных заявок пользователя за текущий период")]),t._v(" "),s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Тип отпуска")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Кол-во дней")])])]),t._v(" "),s("tbody",t._l(t.vacations,function(e,a){return s("tr",[s("td",{staticClass:"text-left"},[t._v(t._s(a))]),t._v(" "),s("td",[t._v(t._s(e))])])}))]),t._v(" "),s("form",{staticClass:"row"},[s("div",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Решайте и комментируйте")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){t.vacation_accept(t.vacid)}}},[t._v("Подвердить")])]),t._v(" "),s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){t.vacation_reject(t.vacid)}}},[t._v("Отказать")])])])]),t._v(" "),s("b-pagination",{staticClass:"mt-2",attrs:{align:"center","total-rows":t.count,"per-page":t.limit,limit:15},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}}),t._v(" "),s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Номер заявки в БД",scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Автор заявки",scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Дата начала отпуска",scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Дата окончания отпуска",scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Кол-во дней отпуска. Включает дату начала и окончания",scope:"col"}},[t._v("Дней")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Тип отпуска",scope:"col"}},[t._v("Тип отпуска")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Список комментариев к заявке. Беленькая иконка означает отсутсвие комментариев",scope:"col"}},[t._v("Комментарии")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Пересечение заявки с заявками владельцев схожих компетенций",scope:"col"}},[t._v("Пересечения")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Отказ либо подтверждение заявки",scope:"col"}},[t._v("Решение")])])]),t._v(" "),s("tbody",t._l(t.res,function(e){return s("tr",[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.begin)+", "+t._s(t.get_day_of_week(e.begin)))]),t._v(" "),s("td",[t._v(t._s(e.end)+", "+t._s(t.get_day_of_week(e.end)))]),t._v(" "),s("td",[t._v(t._s(e.counts))]),t._v(" "),s("td",[t._v(t._s(1==e.vac_type_id?"За счет работодателя":2==e.vac_type_id?"За свой счет":"Тип отпуска не определен"))]),t._v(" "),s("td",[e.comments>0?s("i",{staticClass:"fas fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}}):s("i",{staticClass:"far fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}})]),t._v(" "),s("td",[s("i",{staticClass:"fas fa-random",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_cross_modal(e.id,e.user)}}})]),t._v(" "),s("td",[s("i",{staticClass:"fas fa-pen-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_decision_modal(e.id,e.name,e.user)}}})])])}))])],1)},staticRenderFns:[]},F=s("VU/8")(B,V,!1,null,null,null).exports,T=(s("mtWM"),{name:"v_admin_list",props:["user_id","clname","user_token"],data:function(){return{res:{},vacid:null,name:null,comment:"",res_comments:{},res_cross:{},limit:8,current_page:1,count:null}},mounted:function(){this.get_list("count"),this.get_list()},watch:{clname:function(){this.get_list("count"),this.get_list()},current_page:function(){this.get_list()}},methods:{show_cross_modal:function(t,e){var s=this;this.axios.get("/vm/admin/cross",{params:{userid:this.user_id,vacid:t,clid:e},headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){s.res_cross=t.data,s.$refs.cross_modal.show()})},show_comment_modal:function(t){var e=this;this.axios.get("/vm/admin/comment",{params:{userid:this.user_id,vacid:t,token:this.user_token},headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){e.res_comments=t.data,e.$refs.comment_modal.show()})},show_reject_modal:function(t,e){this.vacid=t,this.name=e,this.comment="",this.$refs.reject_modal.show()},vacation_reject:function(){var t=this,e={vacid:this.vacid,name:this.name};this.comment.length>0&&(e.comment=this.comment);var s="/vm/admin/vacation/reject?userid="+this.user_id;this.axios.post(s,e,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.get_list()}),this.$refs.reject_modal.hide()},show_accept_modal:function(t,e){this.vacid=t,this.name=e,this.comment="",this.$refs.accept_modal.show()},vacation_accept:function(){var t=this,e={vacid:this.vacid,name:this.name};this.comment.length>0&&(e.comment=this.comment);var s="/vm/admin/vacation/accept?userid="+this.user_id+"&token="+this.user_token;this.axios.post(s,e,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.get_list()}),this.$refs.accept_modal.hide()},get_list:function(t){var e=this,s={params:{userid:this.user_id,page:this.current_page,limit:this.limit},headers:{Authorization:"Bearer "+this.user_token}};t&&(s.params.count="count"),this.clname.length>0&&(s.params.clname=this.clname),this.axios.get("/vm/admin/list",s).then(function(s){t?e.count=+s.data.count:e.res=s.data})},get_day_of_week:function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2]).toLocaleString("ru",{weekday:"short"})}}}),R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("p",[t._v("Список заявок день окончания которых еще не наступил, решение по которым принято. Решение можно изменить.\n        При наведении курсора на название колонки будет показана подсказка")]),t._v(" "),s("b-modal",{ref:"accept_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[s("form",{staticClass:"row"},[s("div",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Подтверждение заявки "+t._s(t.vacid)+", введите ваш комментарий")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-12"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){t.vacation_accept(t.vacid)}}},[t._v("Подвердить")])])])]),t._v(" "),s("b-modal",{ref:"reject_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[s("form",{staticClass:"row"},[s("div",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("Отказ заявки "+t._s(t.vacid)+", введите ваш комментарий")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-12"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){t.vacation_reject(t.vacid)}}},[t._v("Отказ")])])])]),t._v(" "),s("b-modal",{ref:"comment_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[t.res_comments.succecc?s("p",[t._v(t._s(t.res_comments.succecc))]):s("ul",{staticClass:"text-left"},t._l(t.res_comments,function(e){return s("li",[s("strong",[t._v(t._s(e.name))]),t._v(": "+t._s(e.comment)+"\n            ")])}))]),t._v(" "),s("b-modal",{ref:"cross_modal",attrs:{"no-fade":"","hide-footer":"","hide-header":"",size:"lg"}},[s("table",{staticClass:"table table-bordered"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Компетенции")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Статус")])])]),t._v(" "),s("tbody",t._l(t.res_cross,function(e){return s("tr",[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.begin)+", "+t._s(t.get_day_of_week(e.begin)))]),t._v(" "),s("td",[t._v(t._s(e.end)+", "+t._s(t.get_day_of_week(e.end)))]),t._v(" "),s("td",[t._v(t._s(e.competense))]),t._v(" "),s("td",[t._v(t._s(e.status?1==e.status?"Одобрена":-2==e.status?"Отозвана":"Отказ":"В процессе"))])])}))])]),t._v(" "),s("b-pagination",{staticClass:"mt-2",attrs:{align:"center","total-rows":t.count,"per-page":t.limit,limit:15},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}}),t._v(" "),s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Номер заявки в БД",scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Автор заявки",scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Дата начала отпуска",scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Дата окончания отпуска",scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Кол-во дней отпуска. Включает дату начала и окончания",scope:"col"}},[t._v("Дней")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Тип отпуска",scope:"col"}},[t._v("Тип отпуска")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Статус заявки. В процессе - администратор не принял определенного решения. Одобрена - Администратор\n                    одобрил заявку. Отказ - заявка не одобрена Администратором. Отозвано пользователем - пациент передумал",scope:"col"}},[t._v("Статус")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Список комментариев к заявке. Беленькая иконка означает отсутсвие комментариев",scope:"col"}},[t._v("Комментарии")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Пересечение заявки с заявками владельцев схожих компетенций",scope:"col"}},[t._v("Пересечения")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"В зависимости от статуса заявки, можно либо одобрить ее либо отказать. Действие будет\n                    обратное нынешнему статусу. Есть возможность оставить комментарий",scope:"col"}},[t._v("Изменить")])])]),t._v(" "),s("tbody",t._l(t.res,function(e){return s("tr",[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.begin)+", "+t._s(t.get_day_of_week(e.begin)))]),t._v(" "),s("td",[t._v(t._s(e.end)+", "+t._s(t.get_day_of_week(e.end)))]),t._v(" "),s("td",[t._v(t._s(e.counts))]),t._v(" "),s("td",[t._v(t._s(1==e.vac_type_id?"За счет работодателя":2==e.vac_type_id?"За свой счет":"Тип отпуска не определен"))]),t._v(" "),s("td",[t._v(t._s(e.status?1==e.status?"Одобрена":-1==e.status?"Отказ":"Отозвано пользователем":"В процессе"))]),t._v(" "),s("td",[e.comments>0?s("i",{staticClass:"fas fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}}):s("i",{staticClass:"far fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}})]),t._v(" "),s("td",[s("i",{staticClass:"fas fa-random",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_cross_modal(e.id,e.user_id)}}})]),t._v(" "),s("td",[1==e.status?s("i",{staticClass:"fas fa-angry",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_reject_modal(e.id,e.name)}}}):s("i",{staticClass:"fas fa-child",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_accept_modal(e.id,e.name)}}})])])}))])],1)},staticRenderFns:[]},E=s("VU/8")(T,R,!1,null,null,null).exports,U=(s("mtWM"),{name:"v_admin_history",props:["user_id","clname","user_token"],data:function(){return{res:{},res_cross:{},res_comments:{},limit:8,current_page:1,count:null}},mounted:function(){this.get_history("count"),this.get_history()},watch:{clname:function(){this.get_history("count"),this.get_history()},current_page:function(){this.get_history()}},methods:{show_cross_modal:function(t,e){var s=this;this.axios.get("/vm/admin/cross",{params:{userid:this.user_id,vacid:t,clid:e},headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){s.res_cross=t.data,s.$refs.cross_modal.show()})},show_comment_modal:function(t){var e=this;this.axios.get("/vm/admin/comment",{params:{userid:this.user_id,vacid:t},headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){e.res_comments=t.data,e.$refs.comment_modal.show()})},get_history:function(t){var e=this,s={params:{userid:this.user_id,page:this.current_page,limit:this.limit},headers:{Authorization:"Bearer "+this.user_token}};this.clname.length>0&&(s.params.clname=this.clname),t&&(s.params.count="count"),this.axios.get("/vm/admin/history",s).then(function(s){t?e.count=+s.data.count:e.res=s.data})},get_day_of_week:function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2]).toLocaleString("ru",{weekday:"short"})}}}),j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("p",[t._v("Список заявок дата окончания которых уже прошла либо отзванных пользователем. При наведении курсора на название колонки будет показана подсказка")]),t._v(" "),s("b-modal",{ref:"cross_modal",attrs:{"no-fade":"","hide-footer":"","hide-header":"",size:"lg"}},[s("table",{staticClass:"table table-bordered"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Компетенции")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Статус")])])]),t._v(" "),s("tbody",t._l(t.res_cross,function(e){return s("tr",[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.begin)+", "+t._s(t.get_day_of_week(e.begin)))]),t._v(" "),s("td",[t._v(t._s(e.end)+", "+t._s(t.get_day_of_week(e.end)))]),t._v(" "),s("td",[t._v(t._s(e.competense))]),t._v(" "),s("td",[t._v(t._s(e.status?1==e.status?"Одобрена":-2==e.status?"Отозвана":"Отказ":"В процессе"))])])}))])]),t._v(" "),s("b-modal",{ref:"comment_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[t.res_comments.succecc?s("p",[t._v(t._s(t.res_comments.succecc))]):s("ul",{staticClass:"text-left"},t._l(t.res_comments,function(e){return s("li",[s("strong",[t._v(t._s(e.name))]),t._v(": "+t._s(e.comment)+"\n            ")])}))]),t._v(" "),s("b-pagination",{staticClass:"mt-2",attrs:{align:"center","total-rows":t.count,"per-page":t.limit,limit:15},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}}),t._v(" "),s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Номер заявки в БД",scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Автор заявки",scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Дата начала отпуска",scope:"col"}},[t._v("Начало")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Дата окончания отпуска",scope:"col"}},[t._v("Конец")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Кол-во дней отпуска. Включает дату начала и окончания",scope:"col"}},[t._v("Дней")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Тип отпуска",scope:"col"}},[t._v("Тип отпуска")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Статус заявки. В процессе - администратор не принял определенного решения. Одобрена - Администратор\n                    одобрил заявку. Отказ - заявка не одобрена Администратором. Отозвано пользователем - пациент передумал",scope:"col"}},[t._v("Статус")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Список комментариев к заявке. Беленькая иконка означает отсутсвие комментариев",scope:"col"}},[t._v("Комментарии")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Пересечение заявки с заявками владельцев схожих компетенций",scope:"col"}},[t._v("Пересечения")])])]),t._v(" "),s("tbody",t._l(t.res,function(e){return s("tr",[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.begin)+", "+t._s(t.get_day_of_week(e.begin)))]),t._v(" "),s("td",[t._v(t._s(e.end)+", "+t._s(t.get_day_of_week(e.end)))]),t._v(" "),s("td",[t._v(t._s(e.counts))]),t._v(" "),s("td",[t._v(t._s(1==e.vac_type_id?"За счет работодателя":2==e.vac_type_id?"За свой счет":"Тип отпуска не определен"))]),t._v(" "),s("td",[t._v(t._s(e.status?1==e.status?"Одобрена":-1==e.status?"Отказ":"Отозвано пользователем":"В процессе"))]),t._v(" "),s("td",[e.comments>0?s("i",{staticClass:"fas fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}}):s("i",{staticClass:"far fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_comment_modal(e.id)}}})]),t._v(" "),s("td",[s("i",{staticClass:"fas fa-random",staticStyle:{cursor:"pointer"},on:{click:function(s){t.show_cross_modal(e.id,e.user_id)}}})])])}))])],1)},staticRenderFns:[]},D=s("VU/8")(U,j,!1,null,null,null).exports,q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("p",[t._v("Список пользователей с возможностью назначить Администратора и поменять компетенции пользователя (для этого необходимо нажать на книжку). \n        При наведении курсора на название колонки будет показана подсказка")]),t._v(" "),s("b-modal",{ref:"comp_modal",attrs:{centered:"","no-fade":"","hide-footer":"","hide-header":""}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("p",[t._v("Компетенции пользователя "+t._s(t.name))])]),t._v(" "),s("div",{staticClass:"col-6"},[s("vue-bootstrap-typeahead",{attrs:{data:t.all_comp,placeholder:"Введите компетенцию"},on:{hit:function(e){t.select=e}},model:{value:t.new_comp,callback:function(e){t.new_comp=e},expression:"new_comp"}})],1),t._v(" "),s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:t.add_comp}},[t._v("Добавить")])]),t._v(" "),t._l(t.comp_list,function(e){return s("div",{staticClass:"col-3 mt-3"},[s("h5",[s("span",{staticClass:"badge badge-secondary"},[t._v(t._s(e)+" "),s("i",{staticClass:"fas fa-times",staticStyle:{cursor:"pointer"},on:{click:function(s){t.remove_comp(e)}}})])])])}),t._v(" "),s("div",{staticClass:"col-12 mt-3"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:t.send_comp}},[t._v("Обновить компетенции")])])],2)]),t._v(" "),s("b-modal",{ref:"vac_modal",attrs:{"no-fade":"","hide-footer":"","hide-header":""}},[s("p",[t._v("Таблица количества дней одобренных отпусков пользовател "+t._s(t.name))]),t._v(" "),s("table",{staticClass:"table table-bordered"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Год")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Тип отпуска")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Количество дней")])])]),t._v(" "),s("tbody",t._l(t.vacations,function(e){return s("tr",[s("td",[t._v(t._s(e.year))]),t._v(" "),s("td",[t._v(t._s(e.type))]),t._v(" "),s("td",[t._v(t._s(e.days))])])}))])]),t._v(" "),s("table",{staticClass:"table table-hover"},[s("thead",[s("tr",[s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Имя пользователя. При нажатии открывается список компетенций с возможностью править",scope:"col"}},[t._v("Имя")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Почтовый ящик пользователя.",scope:"col"}},[t._v("Email")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Компетенции пользователя.",scope:"col"}},[t._v("Компетенции")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Кол-во дней отпуска.",scope:"col"}},[t._v("Кол-во дней отпуска")]),t._v(" "),s("th",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Признак администратора. Темная звездочка - пользователь является Администратором. \n                    При нажатии статус ставится либо снимается.",scope:"col"}},[t._v("Админ")])])]),t._v(" "),s("tbody",t._l(t.res,function(e){return s("tr",[s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.email))]),t._v(" "),s("td",{staticClass:"d-flex justify-content-between"},[t._v(t._s(e.competense?e.competense:"Не назначены")+"\n                    "),s("i",{staticClass:"fas fa-book",staticStyle:{cursor:"pointer"},on:{click:function(s){t.competense_edit(e.id,e.competense,e.name)}}})]),t._v(" "),s("td",[s("a",{attrs:{href:"#"},on:{click:function(s){t.info(e.id,e.name)}}},[t._v("Просмотреть")])]),t._v(" "),s("td",[e.isadmin?s("i",{staticClass:"fas fa-star",staticStyle:{cursor:"pointer"},on:{click:function(s){t.admins(e.id)}}}):s("i",{staticClass:"far fa-star",staticStyle:{cursor:"pointer"},on:{click:function(s){t.admins(e.id,!0)}}})])])}))])],1)},staticRenderFns:[]},L=s("VU/8")({name:"v_admin_users",props:["user_id","user_token","clname"],data:function(){return{res:{},competenses:null,name:null,uid:null,vacations:[],comp_list:null,all_comp:[],new_comp:null}},mounted:function(){this.get_users_new()},watch:{clname:function(){this.get_users_new()}},methods:{send_comp:function(){var t=this,e={competenses:this.comp_list.join(),clid:this.uid},s="/vm/admin/user?userid="+this.user_id;this.axios.post(s,e,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(e){t.competenses=e.data.success,t.get_users_new()}),this.$refs.comp_modal.hide()},add_comp:function(t){-1==this.comp_list.indexOf(this.new_comp)&&this.comp_list.push(this.new_comp)},remove_comp:function(t){this.comp_list.splice(this.comp_list.indexOf(t),1)},competense_edit:function(t,e,s){this.name=s,this.uid=t,this.comp_list=[],e&&(this.comp_list=e.split(", ")),this.$refs.comp_modal.show()},info:function(t,e){var s=this;this.name=e,this.axios.get("/vm/admin/vacations",{params:{userid:this.user_id,clid:t,period:"all"},headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){for(var e in s.vacations=[],t.data)for(var a in t.data[e]){var o={year:e,type:a,days:t.data[e][a]};s.vacations.push(o)}s.$refs.vac_modal.show()})},admins:function(t,e){var s=this,a={isadmin:e,clid:t},o="/vm/admin/user?userid="+this.user_id;this.axios.post(o,a,{headers:{Authorization:"Bearer "+this.user_token}}).then(function(t){s.get_users_new()})},get_users_new:function(){var t=this,e={params:{userid:this.user_id},headers:{Authorization:"Bearer "+this.user_token}};this.clname.length>0&&(e.params.clname=this.clname),this.axios.get("/vm/admin/users",e).then(function(e){t.res=e.data.users,t.all_comp=e.data.comp})}}},q,!1,null,null,null).exports,M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("b-pagination",{staticClass:"mt-2",attrs:{align:"center","total-rows":t.count,"per-page":t.limit,limit:15},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}}),t._v(" "),s("table",{staticClass:"table"},[t._m(0),t._v(" "),s("tbody",t._l(t.res,function(e){return s("tr",[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.date_time))]),t._v(" "),s("td",[t._v(t._s(e.vacation_id))]),t._v(" "),s("td",[t._v(t._s(e.action))]),t._v(" "),s("td",[t._v(t._s(e.comment))])])}))])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Номер")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Автор")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Время")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Заявка")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Действие")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Комментарий")])])])}]},P=s("VU/8")({name:"v_admin_log",props:["user_id","user_token","clname"],data:function(){return{res:{},limit:8,current_page:1,count:null}},watch:{current_page:function(){this.get_log()},clname:function(){this.get_log("count"),this.get_log()}},mounted:function(){this.get_log("count"),this.get_log()},methods:{get_log:function(t){var e=this,s={params:{userid:this.user_id,page:this.current_page,limit:this.limit},headers:{Authorization:"Bearer "+this.user_token}};t&&(s.params.count="count"),this.clname.length>0&&(s.params.clname=this.clname),this.axios.get("/vm/admin/log",s).then(function(s){t?e.count=+s.data.count:e.res=s.data})}}},M,!1,null,null,null).exports;a.a.use(r.a);var H=new r.a({mode:"history",routes:[{path:"/",name:"login",component:m},{path:"/vacation/link/:userid/:vacid",name:"HelloWorld",component:_},{path:"/vacation",name:"vacation",component:p,redirect:"/vacation/user/new",children:[{path:"/vacation/user",name:"v_user",component:b,redirect:"/vacation/user/new",children:[{path:"/vacation/user/new",name:"v_user_new",component:w},{path:"/vacation/user/list",name:"v_user_list",component:x},{path:"/vacation/user/history",name:"v_user_history",component:z}]},{path:"/vacation/admin",name:"v_admin",component:A,redirect:"/vacation/admin/new",children:[{path:"/vacation/admin/new",name:"v_admin_new",component:F},{path:"/vacation/admin/list",name:"v_admin_list",component:E},{path:"/vacation/admin/history",name:"v_admin_history",component:D},{path:"/vacation/admin/users",name:"v_admin_users",component:L},{path:"/vacation/admin/log",name:"v_admin_log",component:P}]}]}]}),O=s("mtWM"),W=s.n(O),I=s("Rf8U"),Y=s.n(I),Q=s("e6fC"),G=(s("9M+g"),{name:"VueBootstrapTypeaheadListItem",props:{data:{},htmlText:{type:String},backgroundVariant:{type:String},textVariant:{type:String}},data:function(){return{active:!1}},computed:{textClasses:function(){var t="";return t+=this.active?"active":"",t+=this.backgroundVariant?" bg-"+this.backgroundVariant:"","vbst-item list-group-item list-group-item-action "+(t+=this.textVariant?" text-"+this.textVariant:"")}}}),J={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{class:t.textClasses,attrs:{tabindex:"0",href:"#"},on:{mouseover:function(e){t.active=!0},mouseout:function(e){t.active=!1}}},[t._t("suggestion",[s("span",{domProps:{innerHTML:t._s(t.htmlText)}})],null,{data:t.data,htmlText:t.htmlText})],2)},staticRenderFns:[]};function K(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}var X={name:"VueBootstrapTypeaheadList",components:{VueBootstrapTypeaheadListItem:s("VU/8")(G,J,!1,null,null,null).exports},props:{data:{type:Array,required:!0,validator:function(t){return t instanceof Array}},query:{type:String,default:""},backgroundVariant:{type:String},textVariant:{type:String},maxMatches:{type:Number,default:10},minMatchingChars:{type:Number,default:2}},computed:{highlight:function(){var t=this;return function(e){if(e=K(e),0===t.query.length)return e;var s=new RegExp(t.escapedQuery,"gi");return e.replace(s,"<strong>$&</strong>")}},escapedQuery:function(){return K(this.query).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},matchedItems:function(){if(0===this.query.length||this.query.length<this.minMatchingChars)return[];var t=new RegExp(this.escapedQuery,"gi");return this.data.filter(function(e){return null!==e.text.match(t)}).sort(function(e,s){var a=e.text.indexOf(e.text.match(t)[0]),o=s.text.indexOf(s.text.match(t)[0]);return a<o?-1:a>o?1:0}).slice(0,this.maxMatches)}},methods:{handleHit:function(t,e){this.$emit("hit",t),e.preventDefault()}}},Z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-group shadow"},t._l(t.matchedItems,function(e,a){return s("vue-bootstrap-typeahead-list-item",{key:a,attrs:{data:e.data,"html-text":t.highlight(e.text),"background-variant":t.backgroundVariant,"text-variant":t.textVariant},nativeOn:{click:function(s){t.handleHit(e,s)}},scopedSlots:t._u([{key:"suggestion",fn:function(e){var s=e.data,a=e.htmlText;return t.$scopedSlots.suggestion?[t._t("suggestion",null,null,{data:s,htmlText:a})]:void 0}}])})}))},staticRenderFns:[]},tt=s("VU/8")(X,Z,!1,null,null,null).exports,et=s("z+gd"),st={name:"VueBootstrapTypehead",components:{VueBootstrapTypeaheadList:tt},props:{size:{type:String,default:null,validator:function(t){return["lg","sm"].indexOf(t)>-1}},value:{type:String},data:{type:Array,required:!0,validator:function(t){return t instanceof Array}},serializer:{type:Function,default:function(t){return t},validator:function(t){return t instanceof Function}},backgroundVariant:String,textVariant:String,inputClass:{type:String,default:""},maxMatches:{type:Number,default:10},minMatchingChars:{type:Number,default:2},placeholder:String,prepend:String,append:String},computed:{sizeClasses:function(){return this.size?"input-group input-group-"+this.size:"input-group"},formattedData:function(){var t=this;return this.data instanceof Array?this.data.map(function(e,s){return{id:s,data:e,text:t.serializer(e)}}):[]}},methods:{resizeList:function(t){var e=t.getBoundingClientRect(),s=this.$refs.list.$el.style;if(s.width=e.width+"px",this.$refs.prependDiv){var a=this.$refs.prependDiv.getBoundingClientRect();s.marginLeft=a.width+"px"}},handleHit:function(t){void 0!==this.value&&this.$emit("input",t.text),this.inputValue=t.text,this.$emit("hit",t.data),this.$refs.input.blur(),this.isFocused=!1},handleBlur:function(t){var e=t.relatedTarget;e&&e.classList.contains("vbst-item")||(this.isFocused=!1)},handleInput:function(t){this.inputValue=t,void 0!==this.value&&this.$emit("input",t)}},data:function(){return{isFocused:!1,inputValue:""}},mounted:function(){var t=this;this.$_ro=new et.a(function(e){t.resizeList(t.$refs.input)}),this.$_ro.observe(this.$refs.input),this.$_ro.observe(this.$refs.list.$el)},beforeDestroy:function(){this.$_ro.disconnect()}},at={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{class:t.sizeClasses},[t.$slots.prepend||t.prepend?s("div",{ref:"prependDiv",staticClass:"input-group-prepend"},[t._t("prepend",[s("span",{staticClass:"input-group-text"},[t._v(t._s(t.prepend))])])],2):t._e(),t._v(" "),s("input",{ref:"input",class:"form-control "+t.inputClass,attrs:{type:"search",placeholder:t.placeholder,"aria-label":t.placeholder,autocomplete:"off"},domProps:{value:t.inputValue},on:{focus:function(e){t.isFocused=!0},blur:t.handleBlur,input:function(e){t.handleInput(e.target.value)}}}),t._v(" "),t.$slots.append||t.append?s("div",{staticClass:"input-group-append"},[t._t("append",[s("span",{staticClass:"input-group-text"},[t._v(t._s(t.append))])])],2):t._e()]),t._v(" "),s("vue-bootstrap-typeahead-list",{directives:[{name:"show",rawName:"v-show",value:t.isFocused&&t.data.length>0,expression:"isFocused && data.length > 0"}],ref:"list",staticClass:"vbt-autcomplete-list",attrs:{query:t.inputValue,data:t.formattedData,"background-variant":t.backgroundVariant,"text-variant":t.textVariant,minMatchingChars:t.minMatchingChars},on:{hit:t.handleHit},scopedSlots:t._u([t._l(t.$scopedSlots,function(e,s){return{key:s,fn:function(e){var a=e.data,o=e.htmlText;return[t._t(s,null,null,{data:a,htmlText:o})]}}})])})],1)},staticRenderFns:[]};var ot=s("VU/8")(st,at,!1,function(t){s("ex+/")},"data-v-94fef0d6",null).exports,it=s("dHJf");s("Gs8j");W.a.defaults.baseURL="",a.a.use(Y.a,W.a),a.a.use(Q.a),a.a.use(it.a,{daysShort:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],texts:{apply:"Принять",cancel:"Отмена"}}),a.a.component("vue-bootstrap-typeahead",ot),a.a.use(o.a),a.a.config.productionTip=!1;var nt=new o.a.Store({state:{current:{token:"",name:"",email:"",userid:""}},mutations:{login:function(t,e){t.current.token=e.token,t.current.name=e.name,t.current.email=e.email,t.current.userid=e.userid}}});new a.a({el:"#app",router:H,store:nt,components:{App:n},template:"<App/>"})},"ex+/":function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.42485c18ff7483d20b28.js.map