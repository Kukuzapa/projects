(function(t){function e(e){for(var s,n,r=e[0],l=e[1],c=e[2],u=0,_=[];u<r.length;u++)n=r[u],o[n]&&_.push(o[n][0]),o[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(_.length)_.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==o[l]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},o={app:0},i=[];function n(t){return r.p+"static/js/"+({about:"about"}[t]||t)+"."+{about:"8b907bfe"}[t]+".js"}function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=o[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise(function(e,s){a=o[t]=[e,s]});e.push(a[2]=s);var i,l=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=n(t),i=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=o[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,n=new Error("Loading chunk "+t+" failed.\n("+s+": "+i+")");n.type=s,n.request=i,a[1](n)}o[t]=void 0}};var u=setTimeout(function(){i({type:"timeout",target:c})},12e4);c.onerror=c.onload=i,l.appendChild(c)}return Promise.all(e)},r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"31f2":function(t,e,a){"use strict";var s=a("ec41"),o=a.n(s);o.a},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-3",attrs:{id:"app"}},[a("router-view")],1)},i=[],n=a("2877"),r={},l=Object(n["a"])(r,o,i,!1,null,null,null);l.options.__file="App.vue";var c=l.exports,u=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[t.spinner?a("div",{attrs:{id:"loader-wrapper"}},[a("div",{attrs:{id:"loader"}})]):t._e(),a("div",{staticClass:"col-12"},[a("b-button",{attrs:{block:""},on:{click:function(e){t.filter=!t.filter}}},[t._v("Показать фильтр")])],1),t.filter?a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group col-12"},[a("label",{attrs:{for:"datepicker-trigger"}},[t._v("Выбор Даты_С, Даты_По или обеих дат")]),a("div",{staticClass:"datepicker-trigger"},[a("input",{staticClass:"form-control col-12",attrs:{type:"text",id:"datepicker-trigger",placeholder:"Выберите даты"},domProps:{value:t.get_period(t.b_date,t.e_date)}}),a("AirbnbStyleDatepicker",{attrs:{"trigger-element-id":"datepicker-trigger",mode:"range","fullscreen-mobile":!0,dateOne:t.b_date,dateTwo:t.e_date},on:{"date-one-selected":function(e){t.b_date=e},"date-two-selected":function(e){t.e_date=e},apply:t.modify_date}})],1)]),a("div",{staticClass:"col-12"},[a("b-form-select",{staticClass:"mb-3",model:{value:t.type_reg,callback:function(e){t.type_reg=e},expression:"type_reg"}},[a("option",{attrs:{value:"Входящие"}},[t._v("Входящие")]),a("option",{attrs:{value:"Отправленные"}},[t._v("Отправленные")]),a("option",{attrs:{value:"Ответы контрагента"}},[t._v("Ответы контрагента")])])],1),a("div",{staticClass:"col-12"},[a("b-form-checkbox",{attrs:{value:"select","unchecked-value":"not_select"},model:{value:t.type_attach,callback:function(e){t.type_attach=e},expression:"type_attach"}},[t._v(" ТипВложения")]),"select"==t.type_attach?a("b-form-group",{attrs:{label:""}},[a("b-form-checkbox-group",{attrs:{options:t.type_options},model:{value:t.type_selected,callback:function(e){t.type_selected=e},expression:"type_selected"}})],1):t._e()],1),a("div",{staticClass:"col-12 mt-3"},[a("b-form-select",{staticClass:"mb-3",model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("option",{attrs:{value:"Требующие ответа"}},[t._v("Требующие ответа")]),a("option",{attrs:{value:"Утвержденные"}},[t._v("Утвержденные")]),a("option",{attrs:{value:"Отклоненные"}},[t._v("Отклоненные")]),a("option",{attrs:{value:"С ошибками"}},[t._v("С ошибками")]),a("option",{attrs:{value:"Незакрепленные"}},[t._v("Незакрепленные")]),a("option",{attrs:{value:"Удаленные"}},[t._v("Удаленные")]),a("option",{attrs:{value:"Удалено контрагентом"}},[t._v("Удалено контрагентом")]),a("option",{attrs:{value:"Внутренняя обработка"}},[t._v("Внутренняя обработка")]),a("option",{attrs:{value:"Недоставленные"}},[t._v("Недоставленные")]),a("option",{attrs:{value:"Не получен ответ"}},[t._v("Не получен ответ")]),a("option",{attrs:{value:"Утвержденные"}},[t._v("Утвержденные")]),a("option",{attrs:{value:"Отклоненные"}},[t._v("Отклоненные")]),a("option",{attrs:{value:"С ошибками"}},[t._v("С ошибками")]),a("option",{attrs:{value:"Незакрепленные"}},[t._v("Незакрепленные")]),a("option",{attrs:{value:"Удаленные"}},[t._v("Удаленные")]),a("option",{attrs:{value:"Удалено контрагентом"}},[t._v("Удалено контрагентом")]),a("option",{attrs:{value:"Черновики"}},[t._v("Черновики")])])],1),a("b-button",{attrs:{block:""},on:{click:t.get_filtered_data}},[t._v("Применить фильтр")])],1):t._e(),a("div",{staticClass:"col-12 mt-3"},["Требующие ответа"==t.status?a("b-button",{attrs:{block:""},on:{click:t.accept_button_press}},[t._v("Утвердить отмеченные")]):t._e()],1),a("div",{staticClass:"col-12 mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2",staticStyle:{"border-right":"solid"}},[t._v("\n\t\t\t\t\tДата и время создания документа\t\t\n\t\t\t\t")]),a("div",{staticClass:"col-3",staticStyle:{"border-right":"solid"}},[t._v("\n\t\t\t\t\tКонтрагент, имя документа\t\t\n\t\t\t\t")]),a("div",{staticClass:"col-2",staticStyle:{"border-right":"solid"}},[t._v("\n\t\t\t\t\tДокумент в СБИС\t\t\n\t\t\t\t")]),a("div",{staticClass:"col-4",staticStyle:{"border-right":"solid"}},[t._v("\n\t\t\t\t\tВложения\t\t\n\t\t\t\t")]),a("div",{staticClass:"col-1 text-center"},[a("b-form-checkbox",{attrs:{disabled:"Требующие ответа"!=t.status},on:{change:function(e){t.select_all_doc(t.check_all)}},model:{value:t.check_all,callback:function(e){t.check_all=e},expression:"check_all"}})],1)]),t._l(t.items,function(e){return a("div",{staticClass:"row"},[a("div",{staticClass:"col-2 cell"},[a("p",[t._v(t._s(e.date_time))]),a("p",[t._v(t._s(e.type))])]),a("div",{staticClass:"col-3 cell"},[a("p",[t._v(t._s(e.partner))]),a("p",[t._v(t._s(e.name))])]),a("div",{staticClass:"col-2 cell"},[a("p",[a("a",{attrs:{target:"_blank",href:e.sbis_link}},[t._v(t._s(e.name))])])]),a("div",{staticClass:"col-4 cell",staticStyle:{"word-wrap":"break-word"}},[t._l(e.attach,function(e){return a("div",[a("p",[t._v(t._s(e))])])}),a("p",[a("a",{attrs:{href:"#",onclick:"event.preventDefault()"},on:{click:function(a){t.test(e.doc_id)}}},[t._v("Показать вложения")])])],2),a("div",{staticClass:"col-1 text-center cell right"},[a("b-form-checkbox",{attrs:{disabled:"Требующие ответа"!=t.status},model:{value:t.check_one[e.doc_id],callback:function(a){t.$set(t.check_one,e.doc_id,a)},expression:"check_one[val.doc_id]"}})],1),t.atta[e.doc_id]?a("div",{staticClass:"col-12 cell right"},[t._l(t.attachment.files,function(e){return a("div",{staticClass:"row text-center"},[a("p",{staticClass:"col-12 text-center"},[t._v(t._s(e.name))]),a("p",{staticClass:"col-4"},[a("a",{attrs:{target:"_blank",href:e.f_pdf+"?force_download"}},[t._v("Скачать PDF представление файла")])]),a("p",{staticClass:"col-4"},[a("a",{attrs:{target:"_blank",href:e.f_file+"?force_download",title:e.file_name}},[t._v("Скачать файл")])]),a("p",{staticClass:"col-4"},[a("a",{attrs:{target:"_blank",href:e.f_pdf}},[t._v("Открыть PDF представление")])])])}),"Требующие ответа"==t.status?a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-12 mb-3"},[a("b-form-textarea",{attrs:{id:"textarea1",placeholder:"Если вы решили отклонить документ, необходимо ввести комментарий.",rows:2,"max-rows":6},model:{value:t.reject_comment,callback:function(e){t.reject_comment=e},expression:"reject_comment"}})],1),a("div",{staticClass:"col-6"},[a("b-button",{attrs:{block:""},on:{click:function(a){t.accept_reject(e.doc_id,t.attachment.level,"Утвердить")}}},[t._v("Утвердить")])],1),a("div",{staticClass:"col-6"},[a("b-button",{attrs:{block:"",disabled:!t.reject_comment},on:{click:function(a){t.accept_reject(e.doc_id,t.attachment.level,"Отклонить")}}},[t._v("Отклонить")])],1)]):t._e()],2):t._e()])})],2)])},_=[],p={name:"HelloWorld",data:function(){return{items:[],filter:!1,b_date:"",e_date:"",m_b_date:null,m_e_date:null,type_attach:"not_select",type_selected:[],type_options:[{text:"СчФктр",value:"СчФктр"},{text:"счФактКор",value:"счФактКор"},{text:"ЭДОНакл",value:"ЭДОНакл"},{text:"АктВР",value:"АктВР"},{text:"АктВРКор",value:"АктВРКор"},{text:"АктСвер",value:"АктСвер"},{text:"АктПП",value:"АктПП"},{text:"АктЗаказ",value:"АктЗаказ"},{text:"НаклПокуп",value:"НаклПокуп"},{text:"ЭДОСч",value:"ЭДОСч"},{text:"ЭДОСчет",value:"ЭДОСчет"},{text:"Договор",value:"Договор"},{text:"УпдДоп",value:"УпдДоп"},{text:"УпдСчфДоп",value:"УпдСчфДоп"},{text:"УкдДис",value:"УкдДис"},{text:"УкдКсчфДис",value:"УкдКсчфДис"},{text:"УпдСчфДопПокуп",value:"УпдСчфДопПокуп"},{text:"УпдДопПокуп",value:"УпдДопПокуп"},{text:"УкдДисПокуп",value:"УкдДисПокуп"},{text:"УкдКсчфДисПокуп",value:"УкдКсчфДисПокуп"}],type_reg:"Входящие",status:"Требующие ответа",attachment:{},atta:{},atta2:null,kyc_token:this.$store.state.current.token,kyc_email:this.$store.state.current.email,spinner:!1,reject_comment:"",check_all:!1,check_one:{},doc_id_list:[]}},watch:{status:function(){this.atta={}},type_reg:function(){this.atta={}},atta2:function(){console.log(this.atta2),this.atta={},this.atta[this.atta2]=!0}},created:function(){this.get_filtered_data()},methods:{select_all_doc:function(t){console.log(t);for(var e=0;e<this.doc_id_list.length;e++)this.check_one[this.doc_id_list[e]]=!this.check_all},accept_reject:function(t,e,a){console.log(t),console.log(e),console.log(a);var s={doc:t,lev:e,com:a};"Отклонить"==a&&(s.comment=this.reject_comment);const o=new URLSearchParams;for(var i in s)o.append(i,s[i]);this.spinner=!0,this.axios.post("/accrej",o,{headers:{Authorization:"Bearer "+this.kyc_token}}).then(t=>{console.log(t),t.data.success?this.get_filtered_data():this.spinner=!1})},accept_button_press:function(){var t=new URLSearchParams;for(var e in this.check_one)this.check_one[e]&&(console.log(e),t.append(e,this.check_one[e]));this.spinner=!0,this.axios.post("/massaccept",t,{headers:{Authorization:"Bearer "+this.kyc_token}}).then(t=>{console.log(t),t.data.success?(this.get_filtered_data(),this.check_one={}):this.spinner=!1})},test:function(t){console.log(t),this.spinner=!0,this.reject_comment="",this.axios.get("/att",{params:{doc_id:t,email:this.kyc_email},headers:{Authorization:"Bearer "+this.kyc_token}}).then(e=>{console.log(e),e.data.error&&this.$router.push("/noway"),this.attachment=e.data,this.atta2=t,this.spinner=!1})},get_filtered_data(){var t={params:{type_reg:this.type_reg,status:this.status,email:this.kyc_email},headers:{Authorization:"Bearer "+this.kyc_token}};this.m_b_date&&(t.params.date_from=this.m_b_date),this.m_e_date&&(t.params.date_to=this.m_e_date),this.type_selected.length>0&&(t.params.type_selected=this.type_selected.join()),this.spinner=!0,this.axios.get("/list",t).then(t=>{if(console.log(t.data),t.data.error)"Плохой пользователь"==t.data.error&&this.$router.push("/noway"),this.items=[];else{this.items=t.data;for(var e=0;e<this.items.length;e++)this.doc_id_list.push(this.items[e].doc_id)}this.spinner=!1})},get_period:function(t,e){var a="";if(t){var s=t.split("-");a=a+s[2]+"."+s[1]+"."+s[0]}if(e){s=e.split("-");a=a+" - "+s[2]+"."+s[1]+"."+s[0]}return a},modify_date:function(){if(this.b_date){var t=this.b_date.split("-");this.m_b_date=t[2]+"."+t[1]+"."+t[0]}if(this.e_date){t=this.e_date.split("-");this.m_e_date=t[2]+"."+t[1]+"."+t[0]}console.log(this.b_date," ",this.e_date)}}},h=p,v=(a("31f2"),Object(n["a"])(h,d,_,!1,null,null,null));v.options.__file="HelloWorld.vue";var f=v.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},b=[],g={name:"login",data:function(){return{response_type:"token",client_id:"91872110-ec98-11e8-8eb2-43679fc94178",state:"kukuzapa sbisin",redirect_uri:window.location.href}},created:function(){this.$route.query.access_token?this.axios.get("https://id.gtn.ee/rc/api/v1.0/userinfo",{headers:{Authorization:"Bearer "+this.$route.query.access_token}}).then(t=>{console.log(t),this.$store.commit("login",{token:this.$route.query.access_token,email:t.data.email}),this.axios.post("/remove",{},{headers:{Authorization:"Bearer "+this.$route.query.access_token}}).then(t=>{console.log(t.data)}),this.$router.push("/hello")}):window.location.href="https://id.gtn.ee/oauth/authorize?response_type="+this.response_type+"&client_id="+this.client_id+"&state=kukuzapa+forever&redirect_uri="+this.redirect_uri}},k=g,y=Object(n["a"])(k,m,b,!1,null,null,null);y.options.__file="login.vue";var x=y.exports,w=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("img",{attrs:{src:"/static/pic/funny.jpg"}}),a("h1",{staticClass:"mt-3"},[t._v("Доступ запрещен")])])}],j={name:"noway"},$=j,S=Object(n["a"])($,w,C,!1,null,null,null);S.options.__file="noway.vue";var O=S.exports;s["a"].use(u["a"]);var P=new u["a"]({mode:"history",base:"/",routes:[{path:"/",name:"login",component:x},{path:"/hello",name:"HelloWorld",component:f},{path:"/noway",name:"noway",component:O},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]}),z=a("2f62");s["a"].use(z["a"]);var A=new z["a"].Store({state:{current:{token:"",email:""}},mutations:{login(t,e){t.current.token=e.token,t.current.email=e.email}},actions:{}}),E=a("9f7b"),B=(a("f9e3"),a("2dd8"),a("bc3a")),T=a.n(B),q=a("a7fe"),L=a.n(q),D=a("b92a");a("1fe0");s["a"].use(E["a"]),s["a"].use(L.a,T.a),T.a.defaults.baseURL="http://localhost:8090",T.a.defaults.baseURL="",s["a"].use(D["a"],{daysShort:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],texts:{apply:"Принять",cancel:"Отмена"}}),s["a"].config.productionTip=!1,new s["a"]({router:P,store:A,render:function(t){return t(c)}}).$mount("#app")},ec41:function(t,e,a){}});
//# sourceMappingURL=app.bc798e07.js.map